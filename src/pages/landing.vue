<template>
  <div class="page-warm">
    <!-- Hero Section -->
    <section class="relative overflow-hidden min-h-[90vh] flex items-center">
      <!-- Animated Background Elements -->
      <div class="absolute inset-0 overflow-hidden">
        <div class="absolute -top-1/2 -left-1/4 w-[600px] h-[600px] bg-amber-200/30 rounded-full blur-3xl animate-pulse"></div>
        <div class="absolute -bottom-1/4 -right-1/4 w-[500px] h-[500px] bg-green-200/40 rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
        <div class="absolute top-1/3 right-1/4 w-[300px] h-[300px] bg-orange-200/30 rounded-full blur-2xl animate-pulse" style="animation-delay: 0.5s;"></div>
      </div>

      <!-- Decorative Elements -->
      <div class="absolute inset-0 opacity-20 pointer-events-none">
        <div class="absolute top-20 left-[10%] text-7xl animate-float">ğŸŒ¾</div>
        <div class="absolute top-40 right-[15%] text-6xl animate-float" style="animation-delay: 0.5s;">ğŸƒ</div>
        <div class="absolute bottom-32 left-[20%] text-5xl animate-float" style="animation-delay: 1s;">ğŸŒ¿</div>
        <div class="absolute bottom-40 right-[25%] text-6xl animate-float" style="animation-delay: 1.5s;">ğŸŒ»</div>
      </div>

      <!-- Content -->
      <div class="container mx-auto px-6 relative z-10">
        <div class="max-w-3xl">
          <!-- Badge -->
          <div class="inline-flex items-center gap-2 px-5 py-2.5 bg-white/60 backdrop-blur-sm rounded-full text-sm font-medium text-amber-800 mb-8 shadow-lg shadow-amber-100/50 border border-amber-200/50">
            <span class="w-2.5 h-2.5 bg-green-500 rounded-full animate-pulse"></span>
            åš´é¸å°ç£åœ¨åœ°ãƒ»æ–°é®®ç›´é€
          </div>

          <h1 class="text-5xl md:text-6xl lg:text-7xl font-bold text-amber-950 leading-tight mb-6">
            æ—¥æ² SunBathe
            <span class="block text-transparent bg-clip-text bg-gradient-to-r from-harvest-600 to-earth-500 mt-2">
              æº«æš–æ‚¨çš„æ¯ä¸€é¤
            </span>
          </h1>

          <p class="text-xl md:text-2xl text-amber-800/80 leading-relaxed mb-10 max-w-2xl">
            æ—¥æ²åš´é¸æœ€å„ªè³ªçš„åœ¨åœ°è¾²ç”¢ï¼Œé€£çµåœŸåœ°èˆ‡é¤æ¡Œã€‚æˆ‘å€‘ç›¸ä¿¡ï¼Œå¥½çš„é£Ÿç‰©ä¸åƒ…æ»‹é¤Šèº«é«”ï¼Œæ›´èƒ½æº«æš–äººå¿ƒã€‚æ¯ä¸€å£ï¼Œéƒ½æ˜¯é™½å…‰çš„å‘³é“ã€‚ä»½é£Ÿæï¼Œéƒ½æ‰¿è¼‰è‘—åœŸåœ°çš„æº«åº¦èˆ‡è¾²äººçš„ç”¨å¿ƒã€‚
          </p>

          <!-- CTA Buttons -->
          <div class="flex flex-wrap gap-4">
            <UButton
              size="xl"
              class="bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white shadow-xl shadow-orange-200/50 px-8 py-4 text-lg font-semibold transition-all duration-300 hover:scale-105"
              @click="goToShop"
            >
              <UIcon name="i-heroicons-shopping-bag" class="mr-2 w-5 h-5" />
              ç«‹å³é¸è³¼
            </UButton>
            <UButton
              size="xl"
              variant="outline"
              class="border-2 border-amber-600 text-amber-700 hover:bg-amber-50 px-8 py-4 text-lg font-semibold"
              @click="scrollToStory"
            >
              <UIcon name="i-heroicons-play-circle" class="mr-2 w-5 h-5" />
              äº†è§£æ›´å¤š
            </UButton>
          </div>

          <!-- Trust Badges -->
          <div class="flex flex-wrap gap-6 mt-12">
            <div class="flex items-center gap-2 text-amber-700">
              <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center">
                <UIcon name="i-heroicons-truck" class="w-5 h-5 text-green-600" />
              </div>
              <span class="font-medium">å…è²»é…é€</span>
            </div>
            <div class="flex items-center gap-2 text-amber-700">
              <div class="w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center">
                <UIcon name="i-heroicons-shield-check" class="w-5 h-5 text-amber-600" />
              </div>
              <span class="font-medium">å“è³ªä¿è­‰</span>
            </div>
            <div class="flex items-center gap-2 text-amber-700">
              <div class="w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center">
                <UIcon name="i-heroicons-heart" class="w-5 h-5 text-orange-600" />
              </div>
              <span class="font-medium">ç”¨å¿ƒç¨®æ¤</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Scroll Indicator -->
      <div class="absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce">
        <div class="w-8 h-12 rounded-full border-2 border-amber-400 flex items-start justify-center pt-2">
          <div class="w-1.5 h-3 bg-amber-400 rounded-full animate-scroll"></div>
        </div>
      </div>
    </section>

    <!-- Features Section -->
    <section class="py-24 relative">
      <div class="container mx-auto px-6">
        <div class="text-center mb-16">
          <h2 class="text-4xl md:text-5xl font-bold text-amber-950 mb-4">æˆ‘å€‘çš„æ‰¿è«¾</h2>
          <p class="text-xl text-amber-700/80 max-w-2xl mx-auto">
            å …æŒå“è³ªã€èª ä¿¡ç¶“ç‡Ÿï¼Œç‚ºæ‚¨å¸¶ä¾†æœ€å®‰å¿ƒçš„è¾²ç”¢å“
          </p>
        </div>

        <div class="grid md:grid-cols-3 gap-8">
          <!-- Feature 1 -->
          <div class="group relative bg-white/70 backdrop-blur-xl rounded-3xl p-8 shadow-xl shadow-amber-100/50 border border-white/50 hover:shadow-2xl hover:shadow-amber-200/50 transition-all duration-500 hover:-translate-y-2">
            <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-green-400 to-emerald-500 flex items-center justify-center mb-6 shadow-lg shadow-green-200/50 group-hover:scale-110 transition-transform duration-300">
              <UIcon name="i-heroicons-sun" class="w-8 h-8 text-white" />
            </div>
            <h3 class="text-2xl font-bold text-amber-950 mb-3">æ–°é®®ç›´é€</h3>
            <p class="text-amber-700/80 leading-relaxed">
              ç”¢åœ°æ¡æ”¶å¾Œ 24 å°æ™‚å…§é…é€ï¼Œä¿ç•™é£Ÿææœ€å¤©ç„¶çš„é¢¨å‘³èˆ‡ç‡Ÿé¤Šï¼Œè®“æ‚¨å“åšæœ€æ–°é®®çš„æ»‹å‘³ã€‚
            </p>
          </div>

          <!-- Feature 2 -->
          <div class="group relative bg-white/70 backdrop-blur-xl rounded-3xl p-8 shadow-xl shadow-amber-100/50 border border-white/50 hover:shadow-2xl hover:shadow-amber-200/50 transition-all duration-500 hover:-translate-y-2">
            <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center mb-6 shadow-lg shadow-amber-200/50 group-hover:scale-110 transition-transform duration-300">
              <UIcon name="i-heroicons-user-group" class="w-8 h-8 text-white" />
            </div>
            <h3 class="text-2xl font-bold text-amber-950 mb-3">åœ¨åœ°å°è¾²</h3>
            <p class="text-amber-700/80 leading-relaxed">
              èˆ‡è¶…é 50 ä½å°ç£åœ¨åœ°è¾²å‹åˆä½œï¼Œæ”¯æŒå‹å–„è€•ä½œï¼Œæ¯ä¸€ç­†æ¶ˆè²»éƒ½æ˜¯å°åœŸåœ°çš„æº«æŸ”å®ˆè­·ã€‚
            </p>
          </div>

          <!-- Feature 3 -->
          <div class="group relative bg-white/70 backdrop-blur-xl rounded-3xl p-8 shadow-xl shadow-amber-100/50 border border-white/50 hover:shadow-2xl hover:shadow-amber-200/50 transition-all duration-500 hover:-translate-y-2">
            <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-orange-400 to-red-400 flex items-center justify-center mb-6 shadow-lg shadow-orange-200/50 group-hover:scale-110 transition-transform duration-300">
              <UIcon name="i-heroicons-shield-check" class="w-8 h-8 text-white" />
            </div>
            <h3 class="text-2xl font-bold text-amber-950 mb-3">å®‰å¿ƒèªè­‰</h3>
            <p class="text-amber-700/80 leading-relaxed">
              åš´æ ¼æŠŠé—œæ¯é …ç”¢å“ä¾†æºï¼Œæä¾›å®Œæ•´çš„ç”¢éŠ·å±¥æ­·ï¼Œè®“æ‚¨åƒå¾—å®‰å¿ƒã€è²·å¾—æ”¾å¿ƒã€‚
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Featured Products Section -->
    <section class="py-24 bg-gradient-to-b from-amber-50/50 to-white relative overflow-hidden">
      <div class="container mx-auto px-6">
        <div class="flex items-center justify-between mb-12">
          <div>
            <h2 class="text-4xl md:text-5xl font-bold text-amber-950 mb-4">ç²¾é¸å•†å“</h2>
            <p class="text-xl text-amber-700/80">æœ¬é€±ç†±éŠ·ãƒ»æ–°é®®ä¸Šæ¶</p>
          </div>
          <UButton
            variant="ghost"
            class="text-amber-700 hover:text-amber-900 hover:bg-amber-100"
            @click="goToShop"
          >
            æŸ¥çœ‹å…¨éƒ¨
            <UIcon name="i-heroicons-arrow-right" class="ml-2" />
          </UButton>
        </div>

        <!-- Loading State -->
        <div v-if="isLoading" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
          <div v-for="i in 4" :key="i" class="bg-white rounded-3xl overflow-hidden shadow-lg animate-pulse">
            <div class="aspect-square bg-amber-100"></div>
            <div class="p-6 space-y-3">
              <div class="h-4 bg-amber-100 rounded-full w-3/4"></div>
              <div class="h-3 bg-amber-100 rounded-full w-1/2"></div>
              <div class="h-10 bg-amber-100 rounded-xl mt-4"></div>
            </div>
          </div>
        </div>

        <!-- Products Grid -->
        <div v-else class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
          <div
            v-for="(product, index) in featuredProducts"
            :key="product.id"
            class="group relative bg-white rounded-3xl overflow-hidden shadow-xl shadow-amber-100/50 hover:shadow-2xl hover:shadow-amber-200/50 transition-all duration-500 cursor-pointer hover:-translate-y-2"
            :style="{ animationDelay: `${index * 100}ms` }"
            @click="viewProduct(product)"
          >
            <!-- Sale Badge -->
            <div v-if="product.salePrice && product.originalPrice" class="absolute top-4 left-4 z-10">
              <div class="bg-gradient-to-r from-red-500 to-orange-500 text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-lg">
                {{ Math.round((1 - product.salePrice / product.originalPrice) * 100) }}% OFF
              </div>
            </div>

            <!-- Product Image -->
            <div class="aspect-square bg-gradient-to-br from-amber-50 to-orange-50 overflow-hidden">
              <img
                v-if="product.mainImage"
                :src="product.mainImage"
                :alt="product.name"
                class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700"
              />
              <div v-else class="w-full h-full flex items-center justify-center bg-gradient-to-br from-amber-50 to-orange-50">
                <img src="@/assets/images/product-placeholder.png" alt="å•†å“åœ–ç‰‡" class="w-3/4 h-3/4 object-contain opacity-80" />
              </div>
            </div>

            <!-- Product Info -->
            <div class="p-6">
              <div v-if="product.category" class="inline-flex items-center gap-1 text-xs text-green-600 font-medium mb-2">
                <UIcon name="i-heroicons-tag" class="w-3 h-3" />
                {{ product.category?.name || 'è¾²ç”¢å“' }}
              </div>

              <h3 class="font-bold text-lg text-amber-950 mb-2 group-hover:text-orange-600 transition-colors line-clamp-2">
                {{ product.name }}
              </h3>

              <div class="flex items-baseline gap-2 mb-4">
                <span v-if="product.salePrice" class="text-2xl font-bold text-orange-600">
                  ${{ product.salePrice.toLocaleString() }}
                </span>
                <span v-if="product.salePrice && product.originalPrice" class="text-sm text-amber-400 line-through">
                  ${{ product.originalPrice.toLocaleString() }}
                </span>
                <span v-if="!product.salePrice" class="text-2xl font-bold text-amber-950">
                  ${{ product.originalPrice?.toLocaleString() }}
                </span>
              </div>

              <UButton
                block
                class="bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white"
                @click.stop="addToCart(product)"
              >
                <UIcon name="i-heroicons-shopping-cart" class="mr-2" />
                åŠ å…¥è³¼ç‰©è»Š
              </UButton>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Story Section -->
    <section id="story" class="py-24 relative overflow-hidden">
      <div class="container mx-auto px-6">
        <div class="grid lg:grid-cols-2 gap-16 items-center">
          <!-- Image Side -->
          <div class="relative">
            <div class="aspect-[4/3] rounded-3xl overflow-hidden shadow-2xl shadow-amber-200/50">
              <img
                src="@/assets/images/story-farm.png"
                alt="æ—¥æ²è¾²å ´æ•…äº‹"
                class="w-full h-full object-cover"
              />
            </div>
            <!-- Decorative -->
            <div class="absolute -bottom-6 -right-6 w-32 h-32 bg-gradient-to-br from-orange-300 to-amber-400 rounded-2xl -z-10"></div>
            <div class="absolute -top-6 -left-6 w-24 h-24 bg-gradient-to-br from-green-300 to-emerald-400 rounded-2xl -z-10"></div>
          </div>

          <!-- Content Side -->
          <div>
            <div class="inline-flex items-center gap-2 px-4 py-2 bg-amber-100 rounded-full text-sm font-medium text-amber-700 mb-6">
              <UIcon name="i-heroicons-heart" class="w-4 h-4" />
              æˆ‘å€‘çš„æ•…äº‹
            </div>

            <h2 class="text-4xl md:text-5xl font-bold text-amber-950 mb-6 leading-tight">
              ç”¨å¿ƒè€•è€˜
              <span class="block text-orange-600">æ¯ä¸€å¯¸åœŸåœ°</span>
            </h2>

            <p class="text-lg text-amber-700/80 leading-relaxed mb-6">
              æˆ‘å€‘ç›¸ä¿¡ï¼Œå¥½çš„é£Ÿç‰©ä¾†è‡ªæ–¼å°åœŸåœ°çš„å°Šé‡èˆ‡ç”¨å¿ƒã€‚å¾ 2020 å¹´å‰µç«‹è‡³ä»Šï¼Œæˆ‘å€‘èµ°è¨ªå°ç£å„åœ°ï¼Œ
              èˆ‡å …æŒå‹å–„è€•ä½œçš„è¾²å‹å€‘å»ºç«‹åˆä½œé—œä¿‚ã€‚
            </p>

            <p class="text-lg text-amber-700/80 leading-relaxed mb-8">
              æ¯ä¸€é …ç”¢å“éƒ½ç¶“éåš´æ ¼ç¯©é¸ï¼Œå¾ç¨®æ¤åˆ°æ¡æ”¶ã€å¾åŒ…è£åˆ°é…é€ï¼Œæˆ‘å€‘ç”¨å¿ƒæŠŠé—œæ¯å€‹ç’°ç¯€ï¼Œ
              åªç‚ºè®“æ‚¨äº«ç”¨æœ€ç´”ç²¹çš„è¾²ç”¢å“ã€‚
            </p>

            <div class="grid grid-cols-3 gap-6 mb-8">
              <div class="text-center">
                <div class="text-4xl font-bold text-orange-600 mb-1">50+</div>
                <div class="text-sm text-amber-600">åˆä½œè¾²å‹</div>
              </div>
              <div class="text-center">
                <div class="text-4xl font-bold text-orange-600 mb-1">100%</div>
                <div class="text-sm text-amber-600">åœ¨åœ°ç”Ÿç”¢</div>
              </div>
              <div class="text-center">
                <div class="text-4xl font-bold text-orange-600 mb-1">24hr</div>
                <div class="text-sm text-amber-600">æ–°é®®é…é€</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Testimonials Section (Static) -->
    <section class="py-24 bg-gradient-to-b from-white to-amber-50/50">
      <div class="container mx-auto px-6">
        <div class="text-center mb-16">
          <h2 class="text-4xl md:text-5xl font-bold text-amber-950 mb-4">é¡§å®¢å¥½è©•</h2>
          <p class="text-xl text-amber-700/80">è½è½ä»–å€‘æ€éº¼èªª</p>
        </div>

        <div class="grid md:grid-cols-3 gap-8">
          <div
            v-for="(testimonial, index) in testimonials"
            :key="index"
            class="bg-white rounded-3xl p-8 shadow-xl shadow-amber-100/50 hover:shadow-2xl hover:shadow-amber-200/50 transition-all duration-300"
          >
            <!-- Stars -->
            <div class="flex gap-1 mb-4">
              <UIcon v-for="i in 5" :key="i" name="i-heroicons-star-solid" class="w-5 h-5 text-amber-400" />
            </div>

            <p class="text-amber-800 leading-relaxed mb-6 italic">
              "{{ testimonial.content }}"
            </p>

            <div class="flex items-center gap-4">
              <div class="w-12 h-12 rounded-full bg-gradient-to-br from-amber-300 to-orange-400 flex items-center justify-center text-white font-bold text-lg">
                {{ testimonial.name.charAt(0) }}
              </div>
              <div>
                <div class="font-semibold text-amber-950">{{ testimonial.name }}</div>
                <div class="text-sm text-amber-600">{{ testimonial.location }}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'
import { useRouter } from 'vue-router'
import { productsApi, type Product, SortOrder } from '@/api'
import { useCartStore } from '@/stores/cart'
import { useToast } from '@/composables/useToast'

const router = useRouter()
const cartStore = useCartStore()
const toast = useToast()

// Data
const featuredProducts = ref<Product[]>([])
const isLoading = ref(false)

// Static testimonials
const testimonials = [
  {
    name: 'æ—å°å§',
    location: 'å°åŒ—å¸‚',
    content: 'è”¬èœçœŸçš„å¾ˆæ–°é®®ï¼æ”¶åˆ°çš„æ™‚å€™é‚„å¸¶è‘—éœ²æ°´ï¼Œç…®èµ·ä¾†ç‰¹åˆ¥ç”œã€‚å·²ç¶“æ˜¯è€å®¢æˆ¶äº†ï¼Œæ¯é€±å›ºå®šè¨‚è³¼ï¼'
  },
  {
    name: 'é™³å…ˆç”Ÿ',
    location: 'æ–°ç«¹ç¸£',
    content: 'èŠ’æœè¶…ç´šå¥½åƒï¼Œç”œåº¦å‰›å‰›å¥½ï¼Œé€ç¦®è‡ªç”¨å…©ç›¸å®œã€‚åŒ…è£ä¹Ÿå¾ˆç”¨å¿ƒï¼Œæ°´æœå®Œå…¨æ²’æœ‰ç¢°å‚·ã€‚'
  },
  {
    name: 'ç‹åª½åª½',
    location: 'å°ä¸­å¸‚',
    content: 'çµ‚æ–¼æ‰¾åˆ°å¯ä»¥å®‰å¿ƒè³¼è²·çš„è¾²ç”¢å“å¹³å°ï¼æ¯é …ç”¢å“éƒ½æœ‰ç”¢éŠ·å±¥æ­·ï¼Œè²·å¾—æ”¾å¿ƒã€åƒå¾—å®‰å¿ƒã€‚'
  }
]

// Methods
const fetchFeaturedProducts = async () => {
  isLoading.value = true
  const response = await productsApi.getAll({
    page: 1,
    limit: 4,
    status: 'active',
    sortBy: 'createdAt',
    sortOrder: SortOrder.DESC
  })
  featuredProducts.value = response.data
  isLoading.value = false
}

const goToShop = () => {
  router.push('/shop/products')
}

const goToRegister = () => {
  router.push('/register')
}

const scrollToStory = () => {
  const storySection = document.getElementById('story')
  if (storySection) {
    storySection.scrollIntoView({ behavior: 'smooth' })
  }
}

const viewProduct = (product: Product) => {
  router.push(`/shop/products/${product.id}`)
}

const addToCart = async (product: Product) => {
  await cartStore.addItem({
    productId: product.id,
    quantity: 1
  })
  toast.success('å·²åŠ å…¥è³¼ç‰©è»Š', product.name)
}

// Lifecycle
onMounted(() => {
  fetchFeaturedProducts()
})
</script>

<style scoped>
@keyframes float {
  0%, 100% {
    transform: translateY(0) rotate(0deg);
  }
  50% {
    transform: translateY(-20px) rotate(5deg);
  }
}

@keyframes scroll {
  0%, 100% {
    opacity: 1;
    transform: translateY(0);
  }
  50% {
    opacity: 0.5;
    transform: translateY(8px);
  }
}

.animate-float {
  animation: float 4s ease-in-out infinite;
}

.animate-scroll {
  animation: scroll 2s ease-in-out infinite;
}
</style>
