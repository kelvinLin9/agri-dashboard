# PWA 功能使用指南

歡迎使用日沐 SunBathe的 PWA（漸進式網頁應用）功能！本指南將幫助您充分利用 PWA 帶來的優勢。

## 🌟 什麼是 PWA？

PWA 讓網頁應用擁有類似原生 App 的體驗：

- 📱 **安裝到桌面/主畫面**：像 App 一樣啟動
- 🔔 **推送通知**：即使應用關閉也能收到提醒
- ⚡ **更快載入**：智慧緩存技術
- 📴 **部分離線使用**：網路不穩也能查看已緩存內容

## 📱 安裝 PWA 應用

### 電腦端（Chrome / Edge）

1. 訪問日沐 SunBathe網站
2. 登入您的帳號
3. 等待 3 秒後，右下角會出現「安裝應用程式」提示
4. 點擊「立即安裝」
5. 或者，點擊瀏覽器地址欄右側的 ⊕ 圖標

**安裝後**：

- 應用會出現在桌面或開始選單
- 點擊圖標可直接啟動，無需開啟瀏覽器
- 擁有獨立視窗，沒有瀏覽器地址欄

### 手機端（Android）

1. 使用 Chrome 瀏覽器訪問網站
2. 點擊右上角選單（⋮）
3. 選擇「加到主畫面」
4. 確認安裝

### 手機端（iOS / Safari）

1. 使用 Safari 瀏覽器訪問網站
2. 點擊底部「分享」按鈕（□↑）
3. 滾動找到「加入主畫面」
4. 點擊「加入」

> [!NOTE]
> iOS 的 PWA 支援較有限，部分功能（如背景推送）需要 iOS 16.4 以上版本。

## 🔔 開啟推送通知

### 為什麼需要推送通知？

即使您關閉了應用或瀏覽器，系統仍能在以下情況即時提醒您：

- 📦 **新訂單**：有新訂單時立即通知
- 💰 **支付狀態**：支付成功/失敗提醒
- 🔄 **訂單狀態**：出貨、送達等狀態更新
- 💬 **系統消息**：重要通知不錯過

### 開啟步驟

1. **自動提示**：登入後約 5 秒，會出現「開啟推送通知」卡片
2. **點擊開啟**：點擊「開啟通知」按鈕
3. **授予權限**：瀏覽器會請求通知權限，點擊「允許」
4. **完成**：✅ 您已成功訂閱推送通知！

### 如果沒有出現提示？

**可能原因**：

- 已經開啟過（自動記錄，不重複提醒）
- 瀏覽器不支援（請使用 Chrome、Edge 或 Firefox）
- 曾經拒絕過權限

**解決方法**：

1. 檢查瀏覽器通知權限設定
2. 確認網址，允許通知
3. 重新載入頁面

## 📬 接收推送通知

### 在線時

當您的應用開啟時：

- 通知會即時出現在應用內（右上角鈴鐺圖標）
- 同時會有系統通知彈出

### 離線時

當應用關閉或電腦休眠時：

- 系統通知會自動彈出
- Windows：通知中心
- macOS：右上角通知
- 手機：通知欄

### 點擊通知

點擊任何通知都會：

1. 開啟或切換到應用
2. 自動跳轉到相關頁面（如訂單詳情）

## ⚙️ 管理通知設定

### 關閉推送通知

**臨時關閉**（系統層級）：

- Windows：設定 → 系統 → 通知
- macOS：系統偏好設定 → 通知
- 找到「日沐 SunBathe」，關閉通知

**永久取消訂閱**（應用層級）：
目前需要在設定頁面操作（未來版本將提供 UI）

### 重新開啟

如果不小心關閉了：

1. 清除瀏覽器的網站數據
2. 重新登入
3. 允許通知提示

## 🚀 PWA 的其他優勢

### 更快的載入速度

- 首次訪問後，靜態資源會被緩存
- 再次訪問時幾乎瞬間載入
- 圖片、樣式表等自動緩存 30 天

### 智慧緩存

應用會自動緩存：

- 已訪問的頁面
- 產品圖片
- API 請求（1 小時）

### 離線提示

當網路斷線時：

- 已緩存的頁面仍可查看
- 會顯示友善的離線提示
- 網路恢復後自動重新連線

## 🔧 常見問題

### Q: 通知太多了怎麼辦？

**A**: 您可以：

1. 調整系統通知設定（免打擾模式）
2. 在應用設定中選擇接收的通知類型（未來功能）

### Q: 可以在多個裝置上安裝嗎？

**A**: 可以！每個裝置都可以獨立安裝和訂閱推送通知。

### Q: 卸載 PWA 會怎樣？

**A**:

- 應用會從桌面移除
- 推送通知訂閱會失效
- 緩存的資料會被清除
- 您仍可以用瀏覽器訪問網站

### Q: 沒有收到推送通知？

**檢查清單**：

- ✅ 是否已訂閱？（查看應用設定）
- ✅ 瀏覽器通知權限是否開啟？
- ✅ 系統免打擾模式是否關閉？
- ✅ 網路連線是否正常？

### Q: 推送通知會消耗很多電嗎？

**A**: 不會。PWA 的推送通知比傳統 WebSocket 更省電，因為：

- 不需要常駐連線
- 使用系統級的推送服務
- 只在有通知時才喚醒

### Q: 支援哪些瀏覽器？

**完整支援**：

- ✅ Chrome（桌面 + Android）
- ✅ Edge（桌面）
- ✅ Firefox（桌面 + Android）

**部分支援**：

- ⚠️ Safari（iOS 16.4+，功能有限）

**不支援**：

- ❌ Internet Explorer

## 📊 效能提升數據

使用 PWA 後的改善：

| 指標             | 改善幅度    |
| ---------------- | ----------- |
| 重複訪問載入時間 | ⬇️ 70%      |
| 圖片載入速度     | ⬇️ 90%      |
| 通知送達率       | ⬆️ 95%      |
| 離線可用性       | ✅ 部分支援 |

## 🎓 使用建議

### 最佳實踐

1. **首次訪問**：請耐心等待資源載入完成
2. **安裝應用**：建議安裝以獲得最佳體驗
3. **開啟通知**：不錯過重要訂單和支付提醒
4. **保持登入**：避免頻繁登入登出

### 進階技巧

- 在 Windows 上，可以將 PWA 固定到工作列
- 在 macOS 上，可以加入 Dock
- 手機上可以像其他 App 一樣管理（長按圖標）

## 🆘 需要幫助？

如果遇到任何問題：

1. 📧 聯繫技術支援：support@example.com
2. 💬 在線客服：應用內右下角聊天按鈕
3. 📖 查看技術文檔：[開發者文檔](./backend/docs/)

---

**享受您的 PWA 體驗！** 🎉

如果您喜歡這個功能，別忘了推薦給同事使用！

---

**最後更新**：2025-12-03  
**版本**：v2.0（Push Notification）
